restart_ha:
  alias: Restart server
  sequence:
    - alias: Restart HA
      service: homeassistant.restart

reload_automations:
    alias: Reload automations
    sequence:
      - alias: Reload Automations
        service: automation.reload

reload_core_config:
    alias: Reload core config
    sequence:
      - alias: Reload core config
        service: homeassistant.reload_core_config

# *****************************************************************************
# Reset homekit
# *****************************************************************************
reset_homekit_script:
  alias: Reset homekit
  sequence:
    - alias: Reset homekit
      service: shell_command.reset_homekit

# *****************************************************************************
# Mqtt commands
# *****************************************************************************
trigger_mqtt:
  alias: MQTT test
  sequence:
    - service: mqtt.publish
      data:
        topic: mqtt/test
        payload: on

# *****************************************************************************
# Lights
# *****************************************************************************
lights_off:
  alias: Lights off
  sequence:
    - service: mqtt.publish
      data:
        topic: lights/all
        payload: 1

# *****************************************************************************
# Evening
# *****************************************************************************
evening_lights:
  alias: Evening lights
  sequence:
    - service: mqtt.publish
      data:
        topic: script/lights/evening
        payload: evening

bedtime_lights:
  alias: Bedtime lights
  sequence:
    - service: mqtt.publish
      data:
        topic: script/lights/bedtime
        payload: bedtime

morning_lights:
  alias: Morning lights
  sequence:
    - service: mqtt.publish
      data:
        topic: script/lights/morning
        payload: morning

# *****************************************************************************
# Morning
# *****************************************************************************
morning_script:
  alias: Morning radio
  sequence:
    # Sonos KPCC
    - service: media_player.sonos_join
      data:
        master: media_player.bedroom
        entity_id:
          - media_player.livingroom
          - media_player.bathroom
    - service: media_player.volume_set
      data:
        entity_id: media_player.bedroom
        volume_level: 0.30
    - service: media_player.volume_set
      data:
        entity_id: media_player.bathroom
        volume_level: 0.20
    - service: media_player.volume_set
      data:
        entity_id: media_player.livingroom
        volume_level: 0.20
    - service: media_player.select_source
      data:
        entity_id: media_player.bedroom
        source: KPCC
    - service: media_player.media_play
      data:
        entity_id: media_player.bedroom
    # lights
    - condition: sun
      before: sunrise
    - service: mqtt.publish
      data:
        topic: script/lights/morning
        payload: morning
    # - service: light.turn_on
    #   entity_id: light.livingroom_lamp
    #   data:
    #     entity_id: light.livingroom_lamp
    #     brightness_pct: 50
    # - service: light.turn_on
    #   entity_id: light.bedroom_lamp_right
    #   data:
    #     entity_id: light.bedroom_lamp_right
    #     brightness_pct: 35
    # - service: light.turn_on
    #   entity_id: light.bedroom_lamp_left
    #   data:
    #     entity_id: light.bedroom_lamp_left
    #     brightness_pct: 35
